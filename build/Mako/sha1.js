function utf8Encode(r){for(var n=String.fromCharCode,e=(r=r.replace(/\r\n/g,"\n"),""),a=0;a<r.length;a++){var t=r.charCodeAt(a);t<128?e+=n(t):e=127<t&&t<2048?(e+=n(t>>6|192))+n(63&t|128):(e=(e+=n(t>>12|224))+n(t>>6&63|128))+n(63&t|128)}return e}$(function(){$("#ba_loginbut").click(function(){for(var r,n,e=$('form input[name="ba_seed"]'),a=$('form input[name="ba_password"]'),t=$("#ba_password2"),o=(t.length||(t=a),e.parent());!o.is("form")&&o.length;)o=o.parent();return o.length&&e.length&&a.length?(n=(n=$('form input[name="ba_realm"]').val())?((r=new SparkMD5).append(utf8Encode($('form input[name="ba_username"]').val())),r.append(":"),r.append(utf8Encode(n)),r.append(":"),r.append(utf8Encode(t.val())),SHA1.hash(r.end()+e.val())):SHA1.hash(utf8Encode(t.val())+e.val()),a.val("").remove(),e.after('<input type="hidden" name="ba_password" value="'+n+'">'),o.submit()):alert("Invalid form"),!1})}),SHA1=function(){function w(r,n){return r<<n|r>>>32-n}function C(r){for(var n="",e=7;0<=e;e--)n+=(r>>>4*e&15).toString(16);return n}return{hash:function(r){r+=String.fromCharCode(128);for(var n,e,a=[1518500249,1859775393,2400959708,3395469782],t=Math.ceil(r.length/4)+2,o=Math.ceil(t/16),f=new Array(o),u=0,h=1732584193,c=4023233417,l=2562383102,d=271733878,i=3285377520,p=new Array(80);u<o;u++)for(f[u]=new Array(16),e=0;e<16;e++)f[u][e]=r.charCodeAt(64*u+4*e)<<24|r.charCodeAt(64*u+4*e+1)<<16|r.charCodeAt(64*u+4*e+2)<<8|r.charCodeAt(64*u+4*e+3);for(f[o-1][14]=8*(r.length-1)/Math.pow(2,32),f[o-1][14]=Math.floor(f[o-1][14]),f[o-1][15]=8*(r.length-1)&4294967295,u=0;u<o;u++){for(n=0;n<16;n++)p[n]=f[u][n];for(n=16;n<80;n++)p[n]=w(p[n-3]^p[n-8]^p[n-14]^p[n-16],1);for(b=h,A=c,g=l,v=d,m=i,n=0;n<80;n++)var s=Math.floor(n/20),s=w(b,5)+function(r,n,e,a){switch(r){case 0:return n&e^~n&a;case 1:return n^e^a;case 2:return n&e^n&a^e&a;case 3:return n^e^a}}(s,A,g,v)+m+a[s]+p[n]&4294967295,m=v,v=g,g=w(A,30),A=b,b=s;h=h+b&4294967295,c=c+A&4294967295,l=l+g&4294967295,d=d+v&4294967295,i=i+m&4294967295}return C(h)+C(c)+C(l)+C(d)+C(i)}}}();